<section class="page">
  <div class="centered-box">
    <img src="http://placekitten.com/g/300/300">
    <h1><%= @cat.name.upcase %></h1>
    
    <table>
      <tbody>
        <tr>
          <th>Attribute</th>
          <th>Value</th>
        </tr>
        <tr>
          <td>age</td>
          <td><%= @cat.age %></td>
        </tr>
        <% @columns.each do |attr_name| %>
          <tr>
            <td><%= attr_name %></td>
            <td><%= @cat.send(attr_name) %></td>
          </tr>
        <% end %>
      </tbody>
    </table>

    <br>

    <% if current_user && @cat.user_id == current_user.id %>
      <form action="<%= edit_cat_url(@cat) %>">
        <input type="submit" value="Edit <%= @cat.name %>">
      </form>
    <% end %>
    
    <%= render 'shared/errors' %>
    <br>
    
    <h1>Rental Requests</h1>
    <table>
      <tbody>
        <tr>
          <th>User</th>
          <th>Start Date</th>
          <th>End Date</th>
          <th>Status</th>
        </tr>
        <% @cat.rental_requests.includes(:renter).order('start_date').each do |request| %>
          <%= render 'req_tr', req: request %> 
        <% end %>
      </tbody>
    </table>

    <br>

    <form action="<%= new_cat_rental_request_url %>">
      <input type="hidden" name="id" value="<%= @cat.id %>">
      <input type="submit" value="Rent <%= @cat.name %>">
    </form>
  </div>
</section>